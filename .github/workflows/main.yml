name: Clone Master Branch

on:
  workflow_dispatch:  # 允许手动触发
  push:
    branches:
      - master  # 当 master 分支有推送时自动触发

jobs:
  clone-repository:
    name: Clone Master Branch
    runs-on: ubuntu-latest  # 可选其他运行器（如 macos-latest）
    permissions:
      contents: read  # 只需要读取权限

    steps:
      - name: Checkout Master Branch
        uses: actions/checkout@v4
        with:
          repository: ChefKissInc/NootedRed  # 指定仓库地址
          ref: master                        # 明确指定克隆 master 分支
          submodules: recursive              # 递归克隆所有子模块
          fetch-depth: 0                     # 获取完整提交历史（可选）

      - name: Verify Cloned Content
        run: |
          echo "Cloned repository contents:"
          ls -la
          echo "Submodule status:"
          git submodule status
